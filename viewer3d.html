<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Visor 3D — SOLARSAT</title>
  <link rel="stylesheet" href="assets/css/styles.css"/>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body>

  <header class="header nav">
    <div class="logo" aria-hidden="true"></div>
    <div class="title">🔭 SOLARSAT</div>
    <div class="chip">v3 • 2025-10-05</div>
    <div style="flex:1"></div>
    <a class="btn" href="solar.html">🪐 3D</a>
    <a class="btn" href="ar.html">📱 AR</a>
    <a class="btn" href="vr.html">🥽 VR</a>
    <a class="btn" href="globo.html">🌍 Globo 3D</a>
    <a class="btn" href="mapa.html">🛰️ Ground-Track</a>
    <a class="btn" href="README.html">❓ Ayuda</a>
    <div class="row">
      <a class="btn" id="btnEN">EN</a>
      <a class="btn" id="btnES">ES</a>
    </div>
  </header>

<main class="container">
  <h1 id="title">Visor 3D</h1>
  <model-viewer id="mv" src="" alt="modelo 3D" camera-controls autoplay shadow-intensity="1" exposure="1" ar-modes="webxr scene-viewer quick-look" auto-rotate></model-viewer>
  <div class="row" style="gap:.5rem;margin-top:1rem">
    <a class="btn" id="btnAR" target="_self">📱 Abrir en AR</a>
    <a class="btn" id="btnVR" target="_self">🥽 Abrir en VR</a>
  </div>
</main>
<script>
  (function() {
    const p = new URLSearchParams(location.search);
    const src = p.get('src') || '';
    const title = decodeURIComponent(p.get('title')||'').trim();
    const mv = document.getElementById('mv');
    const t = document.getElementById('title');
    if (title) t.textContent = title;
    if (src) {
      mv.src = src;
      mv.setAttribute('crossorigin','anonymous');
    }
    // Wire buttons to dedicated viewers preserving params
    document.getElementById('btnAR').href = 'viewerar.html?'+p.toString();
    document.getElementById('btnVR').href = 'viewervr.html?'+p.toString();
  })();
</script>
</body>
</html>
